<section class="detail-container">
  <div class="row" style="width: 100%">
    <div class="col-md-6 text-center">
      <img
        src="<%= product.image %>"
        class="img-fluid rounded"
        alt="<%= product.productName %>"
        style="height: 500px; object-fit: cover"
      />
    </div>

    <div class="col-md-6">
      <h2 class="mb-3"><%= product.productName %></h2>
      <p class="text-muted mb-3"><%= product.description %></p>
      <h4 class="text-primary mb-4">$<%= product.price %></h4>

      <div class="d-flex align-items-center mb-3">
        <button
          class="btn btn-outline-secondary btn-sm me-2"
          type="button"
          id="decrement"
        >
          -
        </button>
        <input
          type="text"
          id="quantity"
          class="form-control text-center"
          value="1"
          style="width: 60px"
        />
        <button
          class="btn btn-outline-secondary btn-sm ms-2"
          type="button"
          id="increment"
        >
          +
        </button>
      </div>

      <button
        class="btn btn-success btn-lg"
        onclick="addToCart(<%=product.id%>)"
      >
        Add to Cart
      </button>
    </div>
  </div>
</section>
<div class="container my-5">
  <% if (locals.user) { %>
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-3">Leave a Review</h5>

      <form action="/product/<%= product.id %>/review" method="POST">
        <div class="mb-3">
          <label class="form-label">Your Review</label>
          <textarea
            name="comment"
            class="form-control"
            rows="4"
            placeholder="Write your review..."
            required
          ></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Submit Review</button>
      </form>
    </div>
  </div>
  <% } else { %>
  <div class="alert alert-info">
    <a href="/login" class="alert-link">Login</a> to leave a review.
  </div>
  <% } %>
</div>
<div class="container mb-5">
  <h4 class="mb-4">Customer Reviews (<%= reviews.length %>)</h4>

  <% if (reviews.length === 0) { %>
  <div class="alert alert-secondary">No reviews yet.</div>
  <% } else { %> <% reviews.forEach(review => { %>
  <div class="card mb-3 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between">
        <strong><%= review.User.name %></strong>
        <small class="text-muted">
          <%= review.createdAt.toDateString() %>
        </small>
      </div>

      <p class="mt-2 mb-0"><%= review.comment %></p>
    </div>
  </div>
  <% }) %> <% } %>
</div>

<script type="module" src="/js/productdetail.js"></script>
